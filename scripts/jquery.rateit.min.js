/*! RateIt | v1.1.2 / 03/28/2019
    https://github.com/gjunge/rateit.js | Twitter: @gjunge
*/
!function(M){function I(e){var t=e.originalEvent.changedTouches[0],a="";switch(e.type){case"touchmove":a="mousemove";break;case"touchend":a="mouseup";break;default:return}var i=document.createEvent("MouseEvent");i.initMouseEvent(a,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i),e.preventDefault()}M.rateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}},M.fn.rateit=function(w,N){function y(e){return e.charAt(0).toUpperCase()+e.substr(1)}var C=1,k={},E="init";if(0===this.length)return this;var e=M.type(w);if("object"==e||null==w)k=M.extend({},M.fn.rateit.defaults,w);else{if("string"==e&&"reset"!==w&&void 0===N)return this.data("rateit"+y(w));"string"==e&&(E="setvalue")}return this.each(function(){function r(e,t){if(null!=t){var a="aria-value"+("value"==e?"now":e),i=n.find(".rateit-range");null!=i.attr(a)&&i.attr(a,t)}return e="rateit"+y(e),n.data.apply(n,arguments)}var n=M(this);if("reset"==w){var e=r("init");for(var t in e)n.data(t,e[t]);if(r("backingfld"))"SELECT"==(a=M(r("backingfld")))[0].nodeName&&"index"===a[0].getAttribute("data-rateit-valuesrc")?a.prop("selectedIndex",r("value")):a.val(r("value")),a.trigger("change"),a[0].min&&(a[0].min=r("min")),a[0].max&&(a[0].max=r("max")),a[0].step&&(a[0].step=r("step"));n.trigger("reset")}n.hasClass("rateit")||n.addClass("rateit");var s="rtl"!=n.css("direction");if("setvalue"==E){if(!r("init"))throw"Can't set value before init";if("readonly"!=w||1!=N||r("readonly")||(n.find(".rateit-range").unbind(),r("wired",!1)),"value"==w&&(N=null==N?r("min"):Math.max(r("min"),Math.min(r("max"),N))),r("backingfld"))"SELECT"==(a=M(r("backingfld")))[0].nodeName&&"index"===a[0].getAttribute("data-rateit-valuesrc")?"value"==w&&a.prop("selectedIndex",N):"value"==w&&a.val(N),"min"==w&&a[0].min&&(a[0].min=N),"max"==w&&a[0].max&&(a[0].max=N),"step"==w&&a[0].step&&(a[0].step=N);r(w,N)}if(!r("init")){var a;if(r("mode",r("mode")||k.mode),r("icon",r("icon")||k.icon),r("min",isNaN(r("min"))?k.min:r("min")),r("max",isNaN(r("max"))?k.max:r("max")),r("step",r("step")||k.step),r("readonly",void 0!==r("readonly")?r("readonly"):k.readonly),r("resetable",void 0!==r("resetable")?r("resetable"):k.resetable),r("backingfld",r("backingfld")||k.backingfld),r("starwidth",r("starwidth")||k.starwidth),r("starheight",r("starheight")||k.starheight),r("value",Math.max(r("min"),Math.min(r("max"),isNaN(r("value"))?isNaN(k.value)?k.min:k.value:r("value")))),r("ispreset",void 0!==r("ispreset")?r("ispreset"):k.ispreset),r("minvalue",isNaN(r("minvalue"))?k.minvalue:r("minvalue")),r("backingfld"))if(((a=M(r("backingfld")).hide()).attr("disabled")||a.attr("readonly"))&&r("readonly",!0),"INPUT"==a[0].nodeName&&("range"!=a[0].type&&"text"!=a[0].type||(r("min",parseInt(a.attr("min"))||r("min")),r("max",parseInt(a.attr("max"))||r("max")),r("step",parseInt(a.attr("step"))||r("step")))),"SELECT"==a[0].nodeName&&1<a[0].options.length){"index"===a[0].getAttribute("data-rateit-valuesrc")?(r("min",isNaN(r("min"))?Number(a[0].options[0].index):r("min")),r("max",Number(a[0].options[a[0].length-1].index)),r("step",Number(a[0].options[1].index)-Number(a[0].options[0].index))):(r("min",isNaN(r("min"))?Number(a[0].options[0].value):r("min")),r("max",Number(a[0].options[a[0].length-1].value)),r("step",Number(a[0].options[1].value)-Number(a[0].options[0].value)));var i=a.find("option[selected]");1==i.length&&("index"===a[0].getAttribute("data-rateit-valuesrc")?r("value",i[0].index):r("value",i.val()))}else r("value",a.val());var l="DIV"==n[0].nodeName?"div":"span";C++;var d='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+M.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"><span></span></button><{{element}} id="rateit-range-{{index}}" class="rateit-range"'+(1==r("readonly")?"":' tabindex="0"')+' role="slider" aria-label="'+M.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+r("min")+'" aria-valuemax="'+r("max")+'" aria-valuenow="'+r("value")+'"><{{element}} class="rateit-empty"></{{element}}><{{element}} class="rateit-selected"></{{element}}><{{element}} class="rateit-hover"></{{element}}></{{element}}>';n.append(d.replace(/{{index}}/gi,C).replace(/{{element}}/gi,l)),s||(n.find(".rateit-reset").css("float","right"),n.find(".rateit-selected").addClass("rateit-selected-rtl"),n.find(".rateit-hover").addClass("rateit-hover-rtl")),"font"==r("mode")?n.addClass("rateit-font").removeClass("rateit-bg"):n.addClass("rateit-bg").removeClass("rateit-font"),r("init",JSON.parse(JSON.stringify(n.data())))}var o="font"==r("mode");o||n.find(".rateit-selected, .rateit-hover").height(r("starheight"));var u=n.find(".rateit-range");if(o){for(var m=r("icon"),v=r("max")-r("min"),h="",c=0;c<v;c++)h+=m;u.find("> *").text(h),r("starwidth",u.width()/(r("max")-r("min")))}else u.width(r("starwidth")*(r("max")-r("min"))).height(r("starheight"));var g="rateit-preset"+(s?"":"-rtl");if(r("ispreset")?n.find(".rateit-selected").addClass(g):n.find(".rateit-selected").removeClass(g),null!=r("value")){var f=(r("value")-r("min"))*r("starwidth");n.find(".rateit-selected").width(f)}var p=n.find(".rateit-reset");!0!==p.data("wired")&&p.bind("click",function(e){e.preventDefault(),p.blur();var t=M.Event("beforereset");if(n.trigger(t),t.isDefaultPrevented())return!1;n.rateit("value",r("minvalue")?r("minvalue"):null),n.trigger("reset")}).data("wired",!0);function b(e,t){var a=(t.changedTouches?t.changedTouches[0].pageX:t.pageX)-M(e).offset().left;s||(a=u.width()-a),a>u.width()&&(a=u.width()),a<0&&(a=0);var i=Math.ceil(a/r("starwidth")*(1/r("step")));return r("minvalue")&&(i=Math.max(r("minvalue")/r("step"),i)),i}function x(e){var t=M.Event("beforerated");return n.trigger(t,[e]),!t.isDefaultPrevented()&&(r("value",e),r("backingfld")&&("SELECT"==a[0].nodeName&&"index"===a[0].getAttribute("data-rateit-valuesrc")?M(r("backingfld")).prop("selectedIndex",e).trigger("change"):M(r("backingfld")).val(e).trigger("change")),r("ispreset")&&(u.find(".rateit-selected").removeClass(g),r("ispreset",!1)),u.find(".rateit-hover").hide(),u.find(".rateit-selected").width(e*r("starwidth")-r("min")*r("starwidth")).show(),n.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[e]),!0)}r("readonly")?p.hide():(r("resetable")||p.hide(),r("wired")||(u.bind("touchmove touchend",I),u.mousemove(function(e){!function(e){var t=e*r("starwidth")*r("step"),a=u.find(".rateit-hover");if(a.data("width")!=t){u.find(".rateit-selected").hide(),a.width(t).show().data("width",t);var i=[e*r("step")+r("min")];n.trigger("hover",i).trigger("over",i)}}(b(this,e))}),u.mouseleave(function(e){u.find(".rateit-hover").hide().width(0).data("width",""),n.trigger("hover",[null]).trigger("over",[null]),u.find(".rateit-selected").show()}),u.mouseup(function(e){var t=b(this,e)*r("step")+r("min");x(t),u.blur()}),u.keyup(function(e){38!=e.which&&e.which!=(s?39:37)||x(Math.min(r("value")+r("step"),r("max"))),40!=e.which&&e.which!=(s?37:39)||x(Math.max(r("value")-r("step"),r("min")))}),r("wired",!0)),r("resetable")&&p.show()),u.attr("aria-readonly",r("readonly"))})},M.fn.rateit.defaults={min:0,max:5,step:.5,mode:"bg",icon:"â˜…",starwidth:16,starheight:16,readonly:!1,resetable:!0,ispreset:!1,minvalue:!1},M(function(){M("div.rateit, span.rateit").rateit()})}(jQuery);
//# sourceMappingURL=jquery.rateit.min.js.map
